<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Aftab Admin Panel</title>
  <style>
    body {
      background: #000;
      color: #00ffe1;
      font-family: Arial, sans-serif;
      padding: 30px;
      text-align: center;
    }
    input, button, select, textarea {
      margin: 8px;
      padding: 10px;
      width: 90%;
      max-width: 400px;
      border-radius: 5px;
      border: 1px solid #00ffe1;
      background: #111;
      color: #00ffe1;
    }
    button {
      background-color: #00ffe1;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    #adminPanel, #toolList {
      display: none;
    }
    .toolCard {
      border: 1px solid #00ffe1;
      margin: 10px auto;
      padding: 10px;
      background: #111;
      max-width: 500px;
      text-align: left;
    }
    .actions button {
      width: auto;
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <h2>üîê AFTAB ADMIN LOGIN</h2>
  <div id="loginBox">
    <input type="text" id="username" placeholder="Username" />
    <input type="password" id="password" placeholder="Password" />
    <button onclick="checkLogin()">Login</button>
    <div id="loginError" style="color:red;"></div>
  </div>  <div id="adminPanel">
    <h2>üõ†Ô∏è Add or Update Tool</h2>
    <input type="text" id="toolName" placeholder="Tool Name" />
    <select id="toolType">
      <option value="mod">Mod APK</option>
      <option value="tool">Tool</option>
      <option value="premium">Premium</option>
    </select>
    <input type="text" id="toolLink" placeholder="Download Link" />
    <textarea id="toolDesc" placeholder="Tool Description"></textarea>
    <input type="date" id="toolDate" />
    <input type="number" step="0.1" id="toolRating" placeholder="Rating (e.g., 4.5)" />
    <input type="hidden" id="editIndex" />
    <button onclick="submitTool()">üíæ Save Tool</button>
    <div id="status"></div>
  </div>  <div id="toolList">
    <h2>üìã Tool List</h2>
    <div id="toolsContainer"></div>
  </div>  <script>
    const githubUser = "aftabsk0005";
    const repo = "Aftabtool";
    const filePath = "tools.json";
    let token = "";
    let tools = [];

    function checkLogin() {
      const u = document.getElementById("username").value.trim();
      const p = document.getElementById("password").value.trim();
      if (u === "Aftab" && p === "hacker05") {
        token = prompt("üîê Enter your GitHub Token:");
        if (!token) return alert("‚ùå Token required!");
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("adminPanel").style.display = "block";
        document.getElementById("toolList").style.display = "block";
        loadTools();
      } else {
        document.getElementById("loginError").innerText = "‚ùå Invalid username or password!";
      }
    }

    async function loadTools() {
      const res = await fetch(`https://api.github.com/repos/${githubUser}/${repo}/contents/${filePath}`, {
        headers: {
          Authorization: `token ${token}`,
          Accept: "application/vnd.github.v3+json"
        }
      });
      const data = await res.json();
      if (!data.content || !data.sha) {
        document.getElementById("status").innerText = "‚ö†Ô∏è File not found or token error.";
        return;
      }
      tools = JSON.parse(atob(data.content.replace(/\n/g, "")));
      window.currentSha = data.sha;
      renderTools();
    }

    function renderTools() {
      const container = document.getElementById("toolsContainer");
      container.innerHTML = "";
      tools.forEach((tool, i) => {
        container.innerHTML += `
          <div class="toolCard">
            <b>${tool.name}</b> (${tool.type})<br/>
            <small>${tool.date} ‚≠ê ${tool.rating}</small><br/>
            <p>${tool.desc}</p>
            <div class="actions">
              <button onclick="editTool(${i})">‚úèÔ∏è Edit</button>
              <button onclick="deleteTool(${i})">üóëÔ∏è Delete</button>
            </div>
          </div>
        `;
      });
    }

    function editTool(index) {
      const t = tools[index];
      document.getElementById("toolName").value = t.name;
      document.getElementById("toolType").value = t.type;
      document.getElementById("toolLink").value = t.link;
      document.getElementById("toolDesc").value = t.desc;
      document.getElementById("toolDate").value = t.date;
      document.getElementById("toolRating").value = t.rating;
      document.getElementById("editIndex").value = index;
    }

    function deleteTool(index) {
      if (confirm("Are you sure you want to delete this tool?")) {
        tools.splice(index, 1);
        updateGitHub();
      }
    }

    function submitTool() {
      const tool = {
        name: document.getElementById("toolName").value,
        type: document.getElementById("toolType").value,
        link: document.getElementById("toolLink").value,
        desc: document.getElementById("toolDesc").value,
        date: document.getElementById("toolDate").value,
        rating: document.getElementById("toolRating").value,
        downloads: 0,
        likes: 0
      };
      const index = document.getElementById("editIndex").value;
      if (index !== "") {
        tools[index] = tool;
        document.getElementById("editIndex").value = "";
      } else {
        tools.push(tool);
      }
      updateGitHub();
    }

    async function updateGitHub() {
      const res = await fetch(`https://api.github.com/repos/${githubUser}/${repo}/contents/${filePath}`, {
        method: "PUT",
        headers: {
          Authorization: `token ${token}`,
          Accept: "application/vnd.github.v3+json"
        },
        body: JSON.stringify({
          message: "Update tools.json",
          content: btoa(JSON.stringify(tools, null, 2)),
          sha: window.currentSha
        })
      });

      if (res.ok) {
        document.getElementById("status").innerText = "‚úÖ Update successful!";
        loadTools();
      } else {
        document.getElementById("status").innerText = "‚ùå Failed to update GitHub.";
      }
    }
  </script></body>
      </html>
