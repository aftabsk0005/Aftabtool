<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Aftab Admin Panel</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #00ffe1;
      padding: 20px;
    }
    input, textarea, select, button {
      display: block;
      margin: 10px 0;
      padding: 10px;
      width: 100%;
      background: #000;
      color: #00ffe1;
      border: 1px solid #00ffe1;
      border-radius: 5px;
    }
    button {
      background-color: #00ffe1;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    #status {
      margin-top: 20px;
      color: lime;
    }
  </style>
</head>
<body>
  <h2>üõ†Ô∏è AFTAB Admin Panel (GitHub JSON Based)</h2>

  <input type="text" id="toolName" placeholder="Tool Name">
  <select id="toolType">
    <option value="mod">Mod APK</option>
    <option value="tool">Tool</option>
    <option value="premium">Premium</option>
  </select>
  <input type="text" id="toolLink" placeholder="Download Link">
  <textarea id="toolDesc" placeholder="Description"></textarea>
  <input type="date" id="toolDate">
  <input type="number" step="0.1" id="toolRating" placeholder="Rating (e.g., 4.5)">
  <button onclick="submitTool()">‚ûï Add Tool</button>

  <div id="status"></div>

  <script>
    const username = "aftabsk0005";
    const repo = "Aftabtool";
    const token = "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";
    const filePath = "tools.json";

    async function submitTool() {
      const name = document.getElementById("toolName").value;
      const type = document.getElementById("toolType").value;
      const link = document.getElementById("toolLink").value;
      const desc = document.getElementById("toolDesc").value;
      const date = document.getElementById("toolDate").value;
      const rating = document.getElementById("toolRating").value;

      if (!name || !type || !link || !desc || !date || !rating) {
        alert("Please fill in all fields!");
        return;
      }

      const newTool = {
        name, type, link, desc, date, rating,
        downloads: 0,
        likes: 0
      };

      const url = `https://api.github.com/repos/${username}/${repo}/contents/${filePath}`;
      const headers = {
        "Authorization": `token ${token}`,
        "Accept": "application/vnd.github.v3+json"
      };

      try {
        const res = await fetch(url, { headers });
        const data = await res.json();
        const tools = JSON.parse(atob(data.content));
        tools.push(newTool);

        const update = await fetch(url, {
          method: "PUT",
          headers,
          body: JSON.stringify({
            message: `Added tool: ${name}`,
            content: btoa(JSON.stringify(tools, null, 2)),
            sha: data.sha
          })
        });

        if (update.ok) {
          document.getElementById("status").textContent = "‚úÖ Tool added successfully!";
        } else {
          document.getElementById("status").textContent = "‚ùå Failed to update tools.json";
        }
      } catch (err) {
        document.getElementById("status").textContent = "‚ùå Error: " + err;
      }
    }
  </script>
</body>
</html>
